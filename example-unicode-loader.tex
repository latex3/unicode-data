% File example-unicode-loader.tex
% 
% Copyright 2015 The LaTeX3 Project
% 
% You may freely use, modify and/or distribute this file.
%
% Issues with this script should be reported at
% https://github.com/latex3/unicode-data
%
% This is an example loader for the files
% - unicode-casing.def
% -unicode-classes.def
% which contain Unicode code point information in a form
% amenable to rapid processing by TeX.
%
% This file assumes that the TeX engine in use is
% Unicode-capable (XeTeX or LuaTeX). It is designed to work in
% IniTeX mode assuming no non-standard category codes are set
% and that TeX and e-TeX primitives are available with their
% normal names.
% 
% This file sets the following properties:
% - \catcode for all code points marked as letters and all
%   letter-like marks 
% - \uccode for all code points with an upper case mapping
% - \lccode for all code points with an upper case mapping
% - \sfcode of 999 for for all code points with an upper case
%   mapping
% - \Umathcode for code points (letters, marks and cased
%   non-letters)
% - When used with XeTeX, \XeTeXcharclass for East Asian
%   characters with line break information available
%
\begingroup
  \catcode`\{=1 %
  \catcode`\}=2 %
  \catcode`\#=6 %
  \def\C#1 #2 #3 {%
    \global\uccode"#1="#2 %
    \global\lccode"#1="#3 %
  }%
  \def\L#1 #2 #3 {%
    \global\catcode"#1=11 %
    \C#1 #2 #3 %
    \ifnum"#1="#3 %
    \else
      \global\sfcode"#1=999 %
    \fi
    \ifnum"#1<"10000 %
      \global\Umathcode"#1="7"01"#1 %
    \else
      \global\Umathcode"#1="0"01"#1 %
    \fi    
  }%
  \def\l#1 {\L#1 #1 #1 }%
  \let\m\l
  \input unicode-casing.def %
\endgroup
\ifdefined\XeTeXcharclass
\else
  \expandafter\endinput
\fi
\begingroup
  \def\setclass#1#2#3{%
    \ifnum#1>#2 %
      \expandafter\gobble
    \else
      \expandafter\firstofone
    \fi
      {%
        \global\XeTeXcharclass#1=#3 %
        \expandafter\setclass\expandafter
          {\number\numexpr#1+1\relax}{#2}{#3}%
      }%
  }%
  \def\gobble#1{}
  \def\firstofone#1{#1}
  \def\ID#1 #2 {\setclass{"#1}{"#2}{1}}
  \def\OP#1 {\setclass{"#1}{"#1}{2}}
  \def\CL#1 {\setclass{"#1}{"#1}{3}}
  \def\EX#1 {\setclass{"#1}{"#1}{3}}
  \def\IS#1 {\setclass{"#1}{"#1}{3}}
  \def\NS#1 {\setclass{"#1}{"#1}{3}}
  \def\CM#1 {\setclass{"#1}{"#1}{256}}
  \input unicode-classes.def %
\endgroup